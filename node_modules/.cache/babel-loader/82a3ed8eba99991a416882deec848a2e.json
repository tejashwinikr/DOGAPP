{"ast":null,"code":"import { ErrorSource, ErrorHandling, formatUnknownError } from '../../tools/error';\nimport { clocksNow } from '../../tools/timeUtils';\nimport { subscribe, unsubscribe } from '../tracekit';\nvar traceKitReportHandler;\nexport function trackRuntimeError(errorObservable) {\n  traceKitReportHandler = function traceKitReportHandler(stackTrace, _, errorObject) {\n    var _a = formatUnknownError(stackTrace, errorObject, 'Uncaught'),\n        stack = _a.stack,\n        message = _a.message,\n        type = _a.type;\n\n    errorObservable.notify({\n      message: message,\n      stack: stack,\n      type: type,\n      source: ErrorSource.SOURCE,\n      startClocks: clocksNow(),\n      originalError: errorObject,\n      handling: ErrorHandling.UNHANDLED\n    });\n  };\n\n  subscribe(traceKitReportHandler);\n  return {\n    stop: function stop() {\n      unsubscribe(traceKitReportHandler);\n    }\n  };\n}","map":{"version":3,"mappings":"AAAA,SAASA,WAAT,EAAsBC,aAAtB,EAAqCC,kBAArC,QAAyE,mBAAzE;AAEA,SAASC,SAAT,QAA0B,uBAA1B;AACA,SAAqBC,SAArB,EAAgCC,WAAhC,QAAmD,aAAnD;AAEA,IAAIC,qBAAJ;AAEA,OAAM,SAAUC,iBAAV,CAA4BC,eAA5B,EAAiE;EACrEF,qBAAqB,GAAG,+BAACG,UAAD,EAAyBC,CAAzB,EAAqCC,WAArC,EAAsD;IACtE,SAA2BT,kBAAkB,CAACO,UAAD,EAAaE,WAAb,EAA0B,UAA1B,CAA7C;IAAA,IAAEC,KAAK,WAAP;IAAA,IAASC,OAAO,aAAhB;IAAA,IAAkBC,IAAI,UAAtB;;IACNN,eAAe,CAACO,MAAhB,CAAuB;MACrBF,OAAO,SADc;MAErBD,KAAK,OAFgB;MAGrBE,IAAI,MAHiB;MAIrBE,MAAM,EAAEhB,WAAW,CAACiB,MAJC;MAKrBC,WAAW,EAAEf,SAAS,EALD;MAMrBgB,aAAa,EAAER,WANM;MAOrBS,QAAQ,EAAEnB,aAAa,CAACoB;IAPH,CAAvB;EASD,CAXD;;EAYAjB,SAAS,CAACE,qBAAD,CAAT;EACA,OAAO;IACLgB,IAAI,EAAE;MACJjB,WAAW,CAACC,qBAAD,CAAX;IACD;EAHI,CAAP;AAKD","names":["ErrorSource","ErrorHandling","formatUnknownError","clocksNow","subscribe","unsubscribe","traceKitReportHandler","trackRuntimeError","errorObservable","stackTrace","_","errorObject","stack","message","type","notify","source","SOURCE","startClocks","originalError","handling","UNHANDLED","stop"],"sourceRoot":"","sources":["../../../src/domain/error/trackRuntimeError.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}