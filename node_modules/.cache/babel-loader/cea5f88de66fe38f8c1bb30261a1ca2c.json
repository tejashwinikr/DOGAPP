{"ast":null,"code":"var _a;\n\nimport { __assign, __decorate } from \"tslib\";\nimport { combine, createContextManager, ErrorSource, includes, monitored, display } from '@datadog/browser-core';\nexport var StatusType = {\n  debug: 'debug',\n  error: 'error',\n  info: 'info',\n  warn: 'warn'\n};\nvar STATUS_PRIORITIES = (_a = {}, _a[StatusType.debug] = 0, _a[StatusType.info] = 1, _a[StatusType.warn] = 2, _a[StatusType.error] = 3, _a);\nexport var STATUSES = Object.keys(StatusType);\nexport var HandlerType = {\n  console: 'console',\n  http: 'http',\n  silent: 'silent'\n};\n\nvar Logger =\n/** @class */\nfunction () {\n  function Logger(sendLog, handlerType, level, loggerContext) {\n    if (handlerType === void 0) {\n      handlerType = HandlerType.http;\n    }\n\n    if (level === void 0) {\n      level = StatusType.debug;\n    }\n\n    if (loggerContext === void 0) {\n      loggerContext = {};\n    }\n\n    this.sendLog = sendLog;\n    this.handlerType = handlerType;\n    this.level = level;\n    this.contextManager = createContextManager();\n    this.contextManager.set(loggerContext);\n  }\n\n  Logger.prototype.log = function (message, messageContext, status) {\n    if (status === void 0) {\n      status = StatusType.info;\n    }\n\n    if (STATUS_PRIORITIES[status] >= STATUS_PRIORITIES[this.level]) {\n      var handlers = Array.isArray(this.handlerType) ? this.handlerType : [this.handlerType];\n\n      if (includes(handlers, HandlerType.http)) {\n        this.sendLog(__assign({\n          message: message,\n          status: status\n        }, combine(this.contextManager.get(), messageContext)));\n      }\n\n      if (includes(handlers, HandlerType.console)) {\n        display.log(status + \": \" + message, combine(this.contextManager.get(), messageContext));\n      }\n    }\n  };\n\n  Logger.prototype.debug = function (message, messageContext) {\n    this.log(message, messageContext, StatusType.debug);\n  };\n\n  Logger.prototype.info = function (message, messageContext) {\n    this.log(message, messageContext, StatusType.info);\n  };\n\n  Logger.prototype.warn = function (message, messageContext) {\n    this.log(message, messageContext, StatusType.warn);\n  };\n\n  Logger.prototype.error = function (message, messageContext) {\n    var errorOrigin = {\n      error: {\n        origin: ErrorSource.LOGGER\n      }\n    };\n    this.log(message, combine(errorOrigin, messageContext), StatusType.error);\n  };\n\n  Logger.prototype.setContext = function (context) {\n    this.contextManager.set(context);\n  };\n\n  Logger.prototype.addContext = function (key, value) {\n    this.contextManager.add(key, value);\n  };\n\n  Logger.prototype.removeContext = function (key) {\n    this.contextManager.remove(key);\n  };\n\n  Logger.prototype.setHandler = function (handler) {\n    this.handlerType = handler;\n  };\n\n  Logger.prototype.setLevel = function (level) {\n    this.level = level;\n  };\n\n  __decorate([monitored], Logger.prototype, \"log\", null);\n\n  return Logger;\n}();\n\nexport { Logger };","map":{"version":3,"mappings":";;;AAAA,SACEA,OADF,EAIEC,oBAJF,EAKEC,WALF,EAMEC,QANF,EAOEC,SAPF,EAQEC,OARF,QASO,uBATP;AAWA,OAAO,IAAMC,UAAU,GAAG;EACxBC,KAAK,EAAE,OADiB;EAExBC,KAAK,EAAE,OAFiB;EAGxBC,IAAI,EAAE,MAHkB;EAIxBC,IAAI,EAAE;AAJkB,CAAnB;AASP,IAAMC,iBAAiB,aACrBC,GAACN,UAAU,CAACC,KAAZ,IAAoB,CADC,EAErBK,GAACN,UAAU,CAACG,IAAZ,IAAmB,CAFE,EAGrBG,GAACN,UAAU,CAACI,IAAZ,IAAmB,CAHE,EAIrBE,GAACN,UAAU,CAACE,KAAZ,IAAoB,CAJC,KAAvB;AAOA,OAAO,IAAMK,QAAQ,GAAGC,MAAM,CAACC,IAAP,CAAYT,UAAZ,CAAjB;AAQP,OAAO,IAAMU,WAAW,GAAG;EACzBC,OAAO,EAAE,SADgB;EAEzBC,IAAI,EAAE,MAFmB;EAGzBC,MAAM,EAAE;AAHiB,CAApB;;AAQP;AAAA;AAAA;EAGE,gBACUC,OADV,EAEUC,WAFV,EAGUC,KAHV,EAIEC,aAJF,EAI6B;IAFnB;MAAAF,cAA2CL,WAAW,CAACE,IAAvD;IAA2D;;IAC3D;MAAAI,QAAoBhB,UAAU,CAACC,KAA/B;IAAoC;;IAC5C;MAAAgB;IAA2B;;IAHnB;IACA;IACA;IALF,sBAAiBtB,oBAAoB,EAArC;IAQN,KAAKuB,cAAL,CAAoBC,GAApB,CAAwBF,aAAxB;EACD;;EAGDG,iCAAIC,OAAJ,EAAqBC,cAArB,EAA8CC,MAA9C,EAAkF;IAApC;MAAAA,SAAqBvB,UAAU,CAACG,IAAhC;IAAoC;;IAChF,IAAIE,iBAAiB,CAACkB,MAAD,CAAjB,IAA6BlB,iBAAiB,CAAC,KAAKW,KAAN,CAAlD,EAAgE;MAC9D,IAAMQ,QAAQ,GAAGC,KAAK,CAACC,OAAN,CAAc,KAAKX,WAAnB,IAAkC,KAAKA,WAAvC,GAAqD,CAAC,KAAKA,WAAN,CAAtE;;MAEA,IAAIlB,QAAQ,CAAC2B,QAAD,EAAWd,WAAW,CAACE,IAAvB,CAAZ,EAA0C;QACxC,KAAKE,OAAL,CAAYa;UAAGN,OAAO,SAAV;UAAYE,MAAM;QAAlB,GAAuB7B,OAAO,CAAC,KAAKwB,cAAL,CAAoBU,GAApB,EAAD,EAA4BN,cAA5B,CAA9B,CAAZ;MACD;;MAED,IAAIzB,QAAQ,CAAC2B,QAAD,EAAWd,WAAW,CAACC,OAAvB,CAAZ,EAA6C;QAC3CZ,OAAO,CAAC8B,GAAR,CAAeN,MAAM,OAAN,GAAWF,OAA1B,EAAqC3B,OAAO,CAAC,KAAKwB,cAAL,CAAoBU,GAApB,EAAD,EAA4BN,cAA5B,CAA5C;MACD;IACF;EACF,CAZD;;EAcAF,mCAAMC,OAAN,EAAuBC,cAAvB,EAA8C;IAC5C,KAAKO,GAAL,CAASR,OAAT,EAAkBC,cAAlB,EAAkCtB,UAAU,CAACC,KAA7C;EACD,CAFD;;EAIAmB,kCAAKC,OAAL,EAAsBC,cAAtB,EAA6C;IAC3C,KAAKO,GAAL,CAASR,OAAT,EAAkBC,cAAlB,EAAkCtB,UAAU,CAACG,IAA7C;EACD,CAFD;;EAIAiB,kCAAKC,OAAL,EAAsBC,cAAtB,EAA6C;IAC3C,KAAKO,GAAL,CAASR,OAAT,EAAkBC,cAAlB,EAAkCtB,UAAU,CAACI,IAA7C;EACD,CAFD;;EAIAgB,mCAAMC,OAAN,EAAuBC,cAAvB,EAA8C;IAC5C,IAAMQ,WAAW,GAAG;MAClB5B,KAAK,EAAE;QACL6B,MAAM,EAAEnC,WAAW,CAACoC;MADf;IADW,CAApB;IAKA,KAAKH,GAAL,CAASR,OAAT,EAAkB3B,OAAO,CAACoC,WAAD,EAAcR,cAAd,CAAzB,EAAwDtB,UAAU,CAACE,KAAnE;EACD,CAPD;;EASAkB,wCAAWa,OAAX,EAA0B;IACxB,KAAKf,cAAL,CAAoBC,GAApB,CAAwBc,OAAxB;EACD,CAFD;;EAIAb,wCAAWc,GAAX,EAAwBC,KAAxB,EAAkC;IAChC,KAAKjB,cAAL,CAAoBkB,GAApB,CAAwBF,GAAxB,EAA6BC,KAA7B;EACD,CAFD;;EAIAf,2CAAcc,GAAd,EAAyB;IACvB,KAAKhB,cAAL,CAAoBmB,MAApB,CAA2BH,GAA3B;EACD,CAFD;;EAIAd,wCAAWkB,OAAX,EAA+C;IAC7C,KAAKvB,WAAL,GAAmBuB,OAAnB;EACD,CAFD;;EAIAlB,sCAASJ,KAAT,EAA0B;IACxB,KAAKA,KAAL,GAAaA,KAAb;EACD,CAFD;;EAnDAuB,YADCzC,SACD;;EAsDF;AAAC,CAnED;;SAAasB","names":["combine","createContextManager","ErrorSource","includes","monitored","display","StatusType","debug","error","info","warn","STATUS_PRIORITIES","_a","STATUSES","Object","keys","HandlerType","console","http","silent","sendLog","handlerType","level","loggerContext","contextManager","set","Logger","message","messageContext","status","handlers","Array","isArray","__assign","get","log","errorOrigin","origin","LOGGER","context","key","value","add","remove","handler","__decorate"],"sourceRoot":"","sources":["../../src/domain/logger.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}