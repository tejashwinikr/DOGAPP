{"ast":null,"code":"var DEFAULT_LIMIT = 10000;\n\nvar BoundedBuffer =\n/** @class */\nfunction () {\n  function BoundedBuffer(limit) {\n    if (limit === void 0) {\n      limit = DEFAULT_LIMIT;\n    }\n\n    this.limit = limit;\n    this.buffer = [];\n  }\n\n  BoundedBuffer.prototype.add = function (callback) {\n    var length = this.buffer.push(callback);\n\n    if (length > this.limit) {\n      this.buffer.splice(0, 1);\n    }\n  };\n\n  BoundedBuffer.prototype.drain = function () {\n    this.buffer.forEach(function (callback) {\n      return callback();\n    });\n    this.buffer.length = 0;\n  };\n\n  return BoundedBuffer;\n}();\n\nexport { BoundedBuffer };","map":{"version":3,"mappings":"AAAA,IAAMA,aAAa,GAAG,KAAtB;;AAEA;AAAA;AAAA;EAGE,uBAAoBC,KAApB,EAAiD;IAA7B;MAAAA;IAA6B;;IAA7B;IAFZ,cAA4B,EAA5B;EAE6C;;EAErDC,wCAAIC,QAAJ,EAAwB;IACtB,IAAMC,MAAM,GAAG,KAAKC,MAAL,CAAYC,IAAZ,CAAiBH,QAAjB,CAAf;;IACA,IAAIC,MAAM,GAAG,KAAKH,KAAlB,EAAyB;MACvB,KAAKI,MAAL,CAAYE,MAAZ,CAAmB,CAAnB,EAAsB,CAAtB;IACD;EACF,CALD;;EAOAL;IACE,KAAKG,MAAL,CAAYG,OAAZ,CAAoB,UAACL,QAAD,EAAS;MAAK,eAAQ,EAAR;IAAU,CAA5C;IACA,KAAKE,MAAL,CAAYD,MAAZ,GAAqB,CAArB;EACD,CAHD;;EAIF;AAAC,CAhBD","names":["DEFAULT_LIMIT","limit","BoundedBuffer","callback","length","buffer","push","splice","forEach"],"sourceRoot":"","sources":["../../src/tools/boundedBuffer.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}