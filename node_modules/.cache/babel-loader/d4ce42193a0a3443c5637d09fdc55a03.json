{"ast":null,"code":"import { toServerDuration, relativeToClocks, generateUUID } from '@datadog/browser-core';\nimport { RumEventType } from '../../../rawRumEvent.types';\nimport { LifeCycleEventType } from '../../lifeCycle';\nexport function startLongTaskCollection(lifeCycle) {\n  lifeCycle.subscribe(LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED, function (entry) {\n    if (entry.entryType !== 'longtask') {\n      return;\n    }\n\n    var startClocks = relativeToClocks(entry.startTime);\n    var rawRumEvent = {\n      date: startClocks.timeStamp,\n      long_task: {\n        id: generateUUID(),\n        duration: toServerDuration(entry.duration)\n      },\n      type: RumEventType.LONG_TASK\n    };\n    lifeCycle.notify(LifeCycleEventType.RAW_RUM_EVENT_COLLECTED, {\n      rawRumEvent: rawRumEvent,\n      startTime: startClocks.relative,\n      domainContext: {\n        performanceEntry: entry.toJSON()\n      }\n    });\n  });\n}","map":{"version":3,"mappings":"AAAA,SAASA,gBAAT,EAA2BC,gBAA3B,EAA6CC,YAA7C,QAAiE,uBAAjE;AACA,SAA8BC,YAA9B,QAAkD,4BAAlD;AACA,SAAoBC,kBAApB,QAA8C,iBAA9C;AAEA,OAAM,SAAUC,uBAAV,CAAkCC,SAAlC,EAAsD;EAC1DA,SAAS,CAACC,SAAV,CAAoBH,kBAAkB,CAACI,2BAAvC,EAAoE,UAACC,KAAD,EAAM;IACxE,IAAIA,KAAK,CAACC,SAAN,KAAoB,UAAxB,EAAoC;MAClC;IACD;;IACD,IAAMC,WAAW,GAAGV,gBAAgB,CAACQ,KAAK,CAACG,SAAP,CAApC;IACA,IAAMC,WAAW,GAAwB;MACvCC,IAAI,EAAEH,WAAW,CAACI,SADqB;MAEvCC,SAAS,EAAE;QACTC,EAAE,EAAEf,YAAY,EADP;QAETgB,QAAQ,EAAElB,gBAAgB,CAACS,KAAK,CAACS,QAAP;MAFjB,CAF4B;MAMvCC,IAAI,EAAEhB,YAAY,CAACiB;IANoB,CAAzC;IAQAd,SAAS,CAACe,MAAV,CAAiBjB,kBAAkB,CAACkB,uBAApC,EAA6D;MAC3DT,WAAW,aADgD;MAE3DD,SAAS,EAAED,WAAW,CAACY,QAFoC;MAG3DC,aAAa,EAAE;QAAEC,gBAAgB,EAAEhB,KAAK,CAACiB,MAAN;MAApB;IAH4C,CAA7D;EAKD,CAlBD;AAmBD","names":["toServerDuration","relativeToClocks","generateUUID","RumEventType","LifeCycleEventType","startLongTaskCollection","lifeCycle","subscribe","PERFORMANCE_ENTRY_COLLECTED","entry","entryType","startClocks","startTime","rawRumEvent","date","timeStamp","long_task","id","duration","type","LONG_TASK","notify","RAW_RUM_EVENT_COLLECTED","relative","domainContext","performanceEntry","toJSON"],"sourceRoot":"","sources":["../../../../src/domain/rumEventsCollection/longTask/longTaskCollection.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}